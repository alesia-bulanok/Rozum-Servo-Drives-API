\hypertarget{group__tutor__c__servomove3}{}\section{Three servos P\+VT move}
\label{group__tutor__c__servomove3}\index{Three servos P\+V\+T move@{Three servos P\+V\+T move}}
The tutorial describes how to set up motion trajectories for three servos and to execute them simultaneously. In this example, each motion trajectory comprises two P\+VT (position-\/time-\/velocity) points\+: 
\begin{DoxyItemize}
\item one P\+VT commanding servos to move to the position of 100 degrees in 6,000 milliseconds 
\item one P\+VT commanding servos to move to the position of -\/100 degrees in 6,000 milliseconds
\end{DoxyItemize}


\begin{DoxyEnumerate}
\item Initialize the interface. 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__can__interface__t}{rr\_can\_interface\_t} *iface = \hyperlink{group___init_ga472a4890dcc7d7a13123c56a06946d91}{rr\_init\_interface}(
      \hyperlink{tutorial_8h_a90947332a0345dc693905e3fc04dbeb2}{TUTORIAL\_DEVICE});
\end{DoxyCodeInclude}

\item Initialize servo 1. 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo1 = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a9a3d33f25d3a72a8e30c885d238b3b65}{TUTORIAL\_SERVO\_0\_ID});
\end{DoxyCodeInclude}

\item Initialize servo 2. 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo2 = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a525a6de936d69ba937949199d94ab568}{TUTORIAL\_SERVO\_1\_ID});
\end{DoxyCodeInclude}

\item Initialize servo 3. 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo3 = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a363c977793cfbddce5486c10ef5b5a87}{TUTORIAL\_SERVO\_2\_ID});
\end{DoxyCodeInclude}

\item Clear points servo I\+D0. 
\begin{DoxyCodeInclude}
    \hyperlink{group___trajectory_ga19472cd90ae91f9b9f49edf4f52f35a2}{rr\_clear\_points\_all}(servo1);
\end{DoxyCodeInclude}

\item Clear points servo I\+D1. 
\begin{DoxyCodeInclude}
    \hyperlink{group___trajectory_ga19472cd90ae91f9b9f49edf4f52f35a2}{rr\_clear\_points\_all}(servo2);
\end{DoxyCodeInclude}

\item Clear points servo I\+D2. 
\begin{DoxyCodeInclude}
    \hyperlink{group___trajectory_ga19472cd90ae91f9b9f49edf4f52f35a2}{rr\_clear\_points\_all}(servo3);
\end{DoxyCodeInclude}
 {\bfseries  Adding P\+VT ponts to form motion queues }
\item Set the first P\+VT point for servo 1, commanding it to move to the position of 100 degrees in 6,000 milliseconds. 
\begin{DoxyCodeInclude}
    \textcolor{keywordtype}{int} status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo1, 100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
\end{DoxyCodeInclude}

\item Set the first P\+VT point for servo 2, commanding it to move to the position of 100 degrees in 6,000 milliseconds. 
\begin{DoxyCodeInclude}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo2, 100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
\end{DoxyCodeInclude}

\item Set the first P\+VT point for servo 3, commanding it to move to the position of 100 degrees in 6,000 milliseconds. 
\begin{DoxyCodeInclude}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo3, 100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
\end{DoxyCodeInclude}

\item Set the second P\+VT point for servo 1, commanding it to move to the position of -\/100 degrees in 6,000 milliseconds. 
\begin{DoxyCodeInclude}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo1, -100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
\end{DoxyCodeInclude}

\item Set the second P\+VT point for servo 2, commanding it to move to the position of -\/100 degrees in 6,000 milliseconds. 
\begin{DoxyCodeInclude}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo2, -100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
\end{DoxyCodeInclude}

\item Set the second P\+VT point for servo 3, commanding it to move to the position of -\/100 degrees in 6,000 milliseconds. 
\begin{DoxyCodeInclude}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo3, -100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
\end{DoxyCodeInclude}
 {\bfseries  Executing the resulting motion queues }
\item Command all servos to start moving simulateneously. Each of the three servos will execute their own motion queues. Set the function parameter to 0 to get the servos moving without a delay. 
\begin{DoxyCodeInclude}
    \hyperlink{group___trajectory_gaeb3f167be0e7caf96d4cb4b648d3a548}{rr\_start\_motion}(iface, 0);
\end{DoxyCodeInclude}

\item To ensure the program will not move on to execute another operation, set an idle period of 14,000 milliseconds. 
\begin{DoxyCodeInclude}
    \hyperlink{group___aux_gaeb26028b83635e028ebc901e1cbf33a1}{rr\_sleep\_ms}(14000); \textcolor{comment}{// wait till the movement ends}
\end{DoxyCodeInclude}
 {\bfseries  Complete tutorial code\+: } 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__can__interface__t}{rr\_can\_interface\_t} *iface = \hyperlink{group___init_ga472a4890dcc7d7a13123c56a06946d91}{rr\_init\_interface}(
      \hyperlink{tutorial_8h_a90947332a0345dc693905e3fc04dbeb2}{TUTORIAL\_DEVICE});
    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo1 = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a9a3d33f25d3a72a8e30c885d238b3b65}{TUTORIAL\_SERVO\_0\_ID});
    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo2 = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a525a6de936d69ba937949199d94ab568}{TUTORIAL\_SERVO\_1\_ID});
    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo3 = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a363c977793cfbddce5486c10ef5b5a87}{TUTORIAL\_SERVO\_2\_ID});

    \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"========== Tutorial of the %s ==========\(\backslash\)n"}, \textcolor{stringliteral}{"controlling three servos"});

    \hyperlink{group___trajectory_ga19472cd90ae91f9b9f49edf4f52f35a2}{rr\_clear\_points\_all}(servo1);
    \hyperlink{group___trajectory_ga19472cd90ae91f9b9f49edf4f52f35a2}{rr\_clear\_points\_all}(servo2);
    \hyperlink{group___trajectory_ga19472cd90ae91f9b9f49edf4f52f35a2}{rr\_clear\_points\_all}(servo3);
    \textcolor{keywordtype}{int} status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo1, 100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo2, 100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo3, 100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo1, -100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo2, -100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
    status = \hyperlink{group___trajectory_gaba5ac04eeadd4a8d888b409f34837ece}{rr\_add\_motion\_point}(servo3, -100.0, 0.0, 6000);
    \textcolor{keywordflow}{if}(status != \hyperlink{api_8h_a92d5be5038abcf89837faf85a08debdca4894234446e2d92068943b3d6d3a0bdc}{RET\_OK})
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"Error in the trjectory point calculation: %d\(\backslash\)n"}, status);
        \textcolor{keywordflow}{return} 1;
    \}
    \hyperlink{group___trajectory_gaeb3f167be0e7caf96d4cb4b648d3a548}{rr\_start\_motion}(iface, 0);

    \hyperlink{group___aux_gaeb26028b83635e028ebc901e1cbf33a1}{rr\_sleep\_ms}(14000); \textcolor{comment}{// wait till the movement ends}
\end{DoxyCodeInclude}

\end{DoxyEnumerate}