\hypertarget{group__tutor__c__param__cache}{}\section{Device parameter cache programming and reading}
\label{group__tutor__c__param__cache}\index{Device parameter cache programming and reading@{Device parameter cache programming and reading}}
This tutorial describes how to set up an array of servo parameters, save them to the program cache in one operation, and then read them one by one from the cache. In this example, we will work with four parameters\+: rotor position, rotor velocity, input voltage, and input current. {\bfseries  Note }\+: In general, it is advisable to use the function, when you need to read {\bfseries more than one parameter} from the servo. If you need to read a single parameter, use the \hyperlink{group___realtime_gae665cf9423955f882e94282d66ba6a60}{rr\+\_\+read\+\_\+parameter} function (refer to the Reading device parameters tutorial).


\begin{DoxyEnumerate}
\item Initialize the interface. 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__can__interface__t}{rr\_can\_interface\_t} *iface = \hyperlink{group___init_ga472a4890dcc7d7a13123c56a06946d91}{rr\_init\_interface}(
      \hyperlink{tutorial_8h_a90947332a0345dc693905e3fc04dbeb2}{TUTORIAL\_DEVICE});
\end{DoxyCodeInclude}

\item Initialize the servo. 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a9a3d33f25d3a72a8e30c885d238b3b65}{TUTORIAL\_SERVO\_0\_ID});
\end{DoxyCodeInclude}
 {\bfseries  Setting up and saving an array of parameters to the program cache}
\item Add parameter 1 (rotor position) to the array of parameters you want to read from the servo. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga770c1e8b4d868cea649592e26a2706dd}{rr\_param\_cache\_setup\_entry}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276daa8dafaaa373617ef2f8585b3d4177115}{APP\_PARAM\_POSITION\_ROTOR}, \textcolor{keyword}{true});
\end{DoxyCodeInclude}

\item Add parameter 2 (rotor velocity) to the array of parameters you want to read from the servo. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga770c1e8b4d868cea649592e26a2706dd}{rr\_param\_cache\_setup\_entry}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276dade3db1d484cf6dd69b115e37ab77051b}{APP\_PARAM\_VELOCITY\_ROTOR}, \textcolor{keyword}{true});
\end{DoxyCodeInclude}

\item Add parameter 3 (input voltage) to the array of parameters you want to read from the servo. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga770c1e8b4d868cea649592e26a2706dd}{rr\_param\_cache\_setup\_entry}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276da78bc54701f1fe1ce6b90b70bbfa62483}{APP\_PARAM\_VOLTAGE\_INPUT}, \textcolor{keyword}{true});
\end{DoxyCodeInclude}

\item Add parameter 4 (input current) to the array of parameters you want to read from the servo. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga770c1e8b4d868cea649592e26a2706dd}{rr\_param\_cache\_setup\_entry}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276dafb1be8c565208f94596b980788ac52fe}{APP\_PARAM\_CURRENT\_INPUT}, \textcolor{keyword}{true});
\end{DoxyCodeInclude}

\item Save the parameters to the program cache. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga4d9f2bcfc136357405359c9ca9d4aedf}{rr\_param\_cache\_update}(servo);
\end{DoxyCodeInclude}
 {\bfseries  Reading the parameters from the cache }
\item Create a variable where the function will read the parameters from the cache. 
\begin{DoxyCodeInclude}
    \textcolor{keywordtype}{float} value;
\end{DoxyCodeInclude}

\item Read parameter 1 (rotor position) from the cache. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga9249202a29031f84b7dc3da37db05dfc}{rr\_read\_cached\_parameter}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276daa8dafaaa373617ef2f8585b3d4177115}{APP\_PARAM\_POSITION\_ROTOR}, &value);
\end{DoxyCodeInclude}

\item Read parameter 2 (rotor velocity) from the cache. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga9249202a29031f84b7dc3da37db05dfc}{rr\_read\_cached\_parameter}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276dade3db1d484cf6dd69b115e37ab77051b}{APP\_PARAM\_VELOCITY\_ROTOR}, &value);
\end{DoxyCodeInclude}

\item Read parameter 3 (input voltage) from the cache. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga9249202a29031f84b7dc3da37db05dfc}{rr\_read\_cached\_parameter}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276da78bc54701f1fe1ce6b90b70bbfa62483}{APP\_PARAM\_VOLTAGE\_INPUT}, &value);
\end{DoxyCodeInclude}

\item Read parameter 4 (input current) from the cache. 
\begin{DoxyCodeInclude}
    \hyperlink{group___realtime_ga9249202a29031f84b7dc3da37db05dfc}{rr\_read\_cached\_parameter}(servo, 
      \hyperlink{api_8h_aa1f58887fab4642cf49f6f453c1d276dafb1be8c565208f94596b980788ac52fe}{APP\_PARAM\_CURRENT\_INPUT}, &value);
\end{DoxyCodeInclude}
 {\bfseries  Complete tutorial code\+: } 
\begin{DoxyCodeInclude}
    \hyperlink{structrr__can__interface__t}{rr\_can\_interface\_t} *iface = \hyperlink{group___init_ga472a4890dcc7d7a13123c56a06946d91}{rr\_init\_interface}(\textcolor{comment}{/*TUTORIAL\_DEVICE*/} \textcolor{stringliteral}{"
      /dev/ttyS3"});

    \hyperlink{structrr__servo__t}{rr\_servo\_t} *servo = \hyperlink{group___init_ga0adb313a3eeb8a4399431e940a1f3e9e}{rr\_init\_servo}(iface, 
      \hyperlink{tutorial_8h_a9a3d33f25d3a72a8e30c885d238b3b65}{TUTORIAL\_SERVO\_0\_ID});

    \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"========== Tutorial of the %s ==========\(\backslash\)n"}, \textcolor{stringliteral}{"reading servo error count"});

    uint32\_t \_size;
    \hyperlink{group___err_ga0803e0fab3e22b1bcb3f51aa393328b4}{rr\_read\_error\_status}(servo, &\_size, 0);
    \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)tError count: %d %s\(\backslash\)n"}, \_size, \_size ? \textcolor{stringliteral}{""} : \textcolor{stringliteral}{"(No errors)"});

    \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"========== Tutorial of the %s ==========\(\backslash\)n"}, \textcolor{stringliteral}{"reading servo error list"});
    uint8\_t array[100];
    uint32\_t size;
    \hyperlink{group___err_ga0803e0fab3e22b1bcb3f51aa393328b4}{rr\_read\_error\_status}(servo, &size, array);
    \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)tError count: %d %s\(\backslash\)n"}, size, size ? \textcolor{stringliteral}{""} : \textcolor{stringliteral}{"(No errors)"});
    \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < size; i++)
    \{
        \hyperlink{api_8h_a0e4aafa2ca9bd25219713176906b7c40}{API\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)t\(\backslash\)tError: %s\(\backslash\)n"}, \hyperlink{group___err_gaa949cec80a64afa06ed9816fe1132888}{rr\_describe\_emcy\_bit}(array[i]));
    \}
\end{DoxyCodeInclude}

\end{DoxyEnumerate}